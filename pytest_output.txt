============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.4.1, pluggy-1.6.0 -- /Users/roger.silva/local_rag/venv/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/roger.silva/local_rag
plugins: Faker-37.5.3, asyncio-1.1.0, anyio-4.10.0, mock-3.14.1, langsmith-0.4.14
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 38 items

tests/test_api.py::TestQueryEndpoint::test_root_endpoint PASSED
tests/test_api.py::TestQueryEndpoint::test_health_endpoint PASSED
tests/test_api.py::TestQueryEndpoint::test_query_missing_question PASSED
tests/test_api.py::TestQueryEndpoint::test_query_empty_question PASSED
tests/test_api.py::TestQueryEndpoint::test_query_success FAILED
tests/test_api.py::TestQueryEndpoint::test_query_no_documents_found FAILED
tests/test_api_client.py::test_rag_client_success PASSED
tests/test_api_client.py::test_rag_client_connection_error PASSED
tests/test_api_client.py::test_rag_client_uses_env_var PASSED
tests/test_cli_script.py::TestFileValidation::test_validate_file_exists_valid_file PASSED
tests/test_cli_script.py::TestFileValidation::test_validate_file_exists_nonexistent_file PASSED
tests/test_cli_script.py::TestFileValidation::test_validate_file_exists_directory PASSED
tests/test_cli_script.py::TestFileValidation::test_validate_file_type_txt_files PASSED
tests/test_cli_script.py::TestFileValidation::test_validate_file_type_non_txt_files PASSED
tests/test_cli_script.py::TestUploadFile::test_upload_file_success PASSED
tests/test_cli_script.py::TestUploadFile::test_upload_file_connection_error PASSED
tests/test_cli_script.py::TestUploadFile::test_upload_file_http_error PASSED
tests/test_cli_script.py::TestMainFunction::test_main_success üì§ Uploading test.txt to http://0.0.0.0:8000...

üéâ Document upload completed successfully!
PASSED
tests/test_cli_script.py::TestMainFunction::test_main_file_not_found 
‚ùå FILE ERROR: File not found or not readable. Please check the file path.
üì§ Uploading nonexistent.txt to http://0.0.0.0:8000...

‚ùå UNEXPECTED ERROR: Unexpected error: [Errno 2] No such file or directory: 'nonexistent.txt'

üéâ Document upload completed successfully!
PASSED
tests/test_cli_script.py::TestMainFunction::test_main_invalid_file_type 
‚ùå FILE TYPE ERROR: Only .txt files are supported. Please provide a text file.
üì§ Uploading document.pdf to http://0.0.0.0:8000...

‚ùå UNEXPECTED ERROR: Unexpected error: [Errno 2] No such file or directory: 'document.pdf'

üéâ Document upload completed successfully!
PASSED
tests/test_cli_script.py::TestMainFunction::test_main_connection_error üì§ Uploading test.txt to http://0.0.0.0:8000...

‚ùå CONNECTION ERROR: Could not connect to the API at http://0.0.0.0:8000. Please ensure the RAG API server is running.

üéâ Document upload completed successfully!
PASSED
tests/test_cli_script.py::TestMainFunction::test_main_custom_api_url üì§ Uploading test.txt to http://custom:9000...

üéâ Document upload completed successfully!
PASSED
tests/test_cli_script.py::TestMainFunction::test_main_verbose_mode PASSED
tests/test_cli_script.py::TestIntegrationScenarios::test_ac1_successful_upload PASSED
tests/test_cli_script.py::TestIntegrationScenarios::test_ac2_file_not_found PASSED
tests/test_cli_script.py::TestIntegrationScenarios::test_ac3_api_not_running PASSED
tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_endpoint_not_implemented_yet PASSED
tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_invalid_file_type PASSED
tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_no_file_provided PASSED
tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_txt_file_success FAILED
tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_service_error_handling FAILED
tests/test_ingest_api.py::TestIngestEndpoint::test_end_to_end_ingest_and_query FAILED
tests/test_ingest_api.py::TestIngestionServiceUnit::test_ingest_from_content_creates_chunks FAILED
tests/test_ingest_api.py::TestFileValidation::test_is_txt_file_valid_extension PASSED
tests/test_ingest_api.py::TestFileValidation::test_is_txt_file_invalid_extension PASSED
tests/test_ui_chat.py::test_query_interface_initializes_state PASSED
tests/test_ui_chat.py::test_query_interface_success_flow PASSED
tests/test_ui_chat.py::test_query_interface_error_flow PASSED

=================================== FAILURES ===================================
_____________________ TestQueryEndpoint.test_query_success _____________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______________ TestQueryEndpoint.test_query_no_documents_found ________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______________ TestIngestEndpoint.test_ingest_txt_file_success ________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________ TestIngestEndpoint.test_ingest_service_error_handling _____________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_____________ TestIngestEndpoint.test_end_to_end_ingest_and_query ______________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______ TestIngestionServiceUnit.test_ingest_from_content_creates_chunks _______
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
=============================== warnings summary ===============================
venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:323
  /Users/roger.silva/local_rag/venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

tests/test_ingest_api.py::TestIngestionServiceUnit::test_ingest_from_content_creates_chunks
  /Users/roger.silva/local_rag/venv/lib/python3.13/site-packages/neo4j/_sync/driver.py:547: DeprecationWarning: Relying on Driver's destructor to close the session is deprecated. Please make sure to close the session. Use it as a context (`with` statement) or make sure to call `.close()` explicitly. Future versions of the driver will not close drivers automatically.
    _deprecation_warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_api.py::TestQueryEndpoint::test_query_success - Failed: async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
FAILED tests/test_api.py::TestQueryEndpoint::test_query_no_documents_found - Failed: async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
FAILED tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_txt_file_success - Failed: async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
FAILED tests/test_ingest_api.py::TestIngestEndpoint::test_ingest_service_error_handling - Failed: async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
FAILED tests/test_ingest_api.py::TestIngestEndpoint::test_end_to_end_ingest_and_query - Failed: async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
FAILED tests/test_ingest_api.py::TestIngestionServiceUnit::test_ingest_from_content_creates_chunks - Failed: async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
=================== 6 failed, 32 passed, 2 warnings in 0.58s ===================
